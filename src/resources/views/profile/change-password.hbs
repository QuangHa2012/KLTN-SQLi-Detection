<div class="container py-5">
  <div class="mx-auto" style="max-width: 700px;">
    <h2 class="fw-semibold mb-4 text-center">Đổi mật khẩu</h2>

    {{#if error}}
      <div class="alert alert-danger text-center">{{error}}</div>
    {{/if}}

    {{#if success}}
      <div class="alert alert-success text-center">{{success}}</div>
    {{/if}}

    <form method="POST" action="/profile/change-password" class="bg-white p-4 border">
      <div class="mb-3">
        <label class="form-label fw-semibold" for="oldPassword">Mật khẩu cũ</label>
        <div class="input-group">
          <input type="password" class="form-control" name="oldPassword" id="oldPassword" required>
          <span class="input-group-text toggle-password" data-target="#oldPassword">
            <i class="bi bi-eye"></i>
          </span>
          {{!-- <button class="btn btn-outline-secondary toggle-password " type="button" data-target="#oldPassword">
            <i class="bi bi-eye"></i>
          </button> --}}
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label fw-semibold" for="newPassword">Mật khẩu mới</label>
        <div class="input-group">
          <input type="password" class="form-control" name="newPassword" id="newPassword" required>
          <span class="input-group-text toggle-password" data-target="#newPassword">
            <i class="bi bi-eye"></i>
          </span>
          {{!-- <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#newPassword">
            <i class="bi bi-eye"></i>
          </button> --}}
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label fw-semibold" for="confirmPassword">Xác nhận mật khẩu mới</label>
        <div class="input-group">
          <input type="password" class="form-control" name="confirmPassword" id="confirmPassword" required>
          <span class="input-group-text toggle-password" data-target="#confirmPassword">
            <i class="bi bi-eye"></i>
          </span>
          {{!-- <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#confirmPassword">
            <i class="bi bi-eye"></i>
          </button> --}}
        </div>
      </div>

      <div class="d-flex justify-content-between mt-4">
        <a href="/profile" class="btn btn-outline-secondary px-4 profile-btn">← Quay lại</a>
        <button type="submit" class="btn btn-dark px-4 profile-btn">Đổi mật khẩu</button>
      </div>
    </form>
  </div>
</div>

<script>
  document.querySelectorAll(".toggle-password").forEach(btn => {
    btn.addEventListener("click", function() {
      const input = document.querySelector(this.dataset.target);
      const icon = this.querySelector("i");
      if (input.type === "password") {
        input.type = "text";
        icon.classList.replace("bi-eye", "bi-eye-slash");
      } else {
        input.type = "password";
        icon.classList.replace("bi-eye-slash", "bi-eye");
      }
    });
  });
</script>

<style>
  .input-group-text {
    background-color: #fff;
    border-left: 0;
    cursor: pointer;
    border-radius: 0 6px 6px 0;
  }

  .input-group .form-control {
    border-right: 0;
  }

  .input-group-text i {
    color: #555;
    transition: color 0.2s ease;
  }

  .input-group-text:hover i {
    color: #000;
  }
</style>
