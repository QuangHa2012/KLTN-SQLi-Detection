<div class="container py-5">
  <div class="mx-auto profile-card p-4 shadow-sm">
    <h2 class="fw-semibold mb-4 text-center text-dark">
      <i class="bi bi-person-circle me-2"></i> Hồ sơ cá nhân
    </h2>

    <div class="row align-items-center">
      <!-- Cột trái: Avatar -->
      <div class="col-md-4 text-center mb-4 mb-md-0 profile-avatar">
        <div class="avatar-wrapper mx-auto mb-3">
          <img
            src="{{#if user.avatar}}{{user.avatar}}{{else}}/images/default-avatar.png{{/if}}"
            alt="Avatar"
            class="avatar-img"
          />
        </div>

        <form action="/profile/upload-avatar" method="POST" enctype="multipart/form-data">
          <label class="btn btn-outline-primary btn-sm px-3 avatar-btn">
            <i class="bi bi-upload me-1"></i> Đổi ảnh đại diện
            <input type="file" name="avatar" accept="image/*" hidden onchange="this.form.submit()">
          </label>
        </form>

        {{#if user.avatar}}
        <form action="/profile/delete-avatar" method="POST" class="mt-2 d-inline-block">
          <button type="submit" class="btn btn-outline-danger btn-sm avatar-btn">
            <i class="bi bi-trash me-1"></i> Xóa ảnh
          </button>
        </form>
        {{/if}}
      </div>

      <!-- Cột phải: Thông tin -->
      <div class="col-md-8">
        <div class="info-box">
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Tên:</div>
            <div class="col-8 text-dark">{{user.username}}</div>
          </div>
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Email:</div>
            <div class="col-8 text-dark">{{user.email}}</div>
          </div>
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Giới tính:</div>
            <div class="col-8 text-dark">
              {{#if (eq user.gender "male")}}Nam
              {{else if (eq user.gender "female")}}Nữ
              {{else if (eq user.gender "other")}}Khác
              {{else}}Chưa cập nhật{{/if}}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Ngày sinh:</div>
            <div class="col-8 text-dark">{{formatBD user.birthday}}</div>
          </div>
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Số điện thoại:</div>
            <div class="col-8 text-dark">{{user.phone}}</div>
          </div>
          <div class="row mb-3">
            <div class="col-4 fw-semibold text-secondary">Địa chỉ:</div>
            <div class="col-8 text-dark">{{user.address}}</div>
          </div>
        </div>

        <div class="d-flex flex-column flex-sm-row justify-content-between gap-3 mt-4">
          <a href="/profile/edit" class="btn btn-dark px-4 profile-btn">
            <i class="bi bi-pencil-square me-1"></i> Chỉnh sửa thông tin
          </a>
          {{#if (eq user.authProvider "local")}}
          <a href="/profile/change-password" class="btn btn-outline-dark px-4 profile-btn">
            <i class="bi bi-key me-1"></i> Đổi mật khẩu
          </a>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.profile-card {
  max-width: 900px;
  background: #fff;
  border-radius: 20px;
  border: 1px solid #eee;
}

.profile-avatar {
  padding-bottom: 44px;
}

.avatar-wrapper {
  width: 160px;
  height: 160px;
  border-radius: 50%;
  overflow: hidden;
  border: 4px solid #f8f9fa;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.avatar-wrapper:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.avatar-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatar-btn {
  border-radius: 10px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.avatar-btn:hover {
  transform: translateY(-2px);
}

.info-box {
  background: #fafafa;
  border-radius: 10px;
  padding: 20px;
  border: 1px solid #eee;
}


</style>
